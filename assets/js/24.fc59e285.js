(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{498:function(e,t,a){"use strict";a.r(t);var s=a(53),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"runtime-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runtime-options"}},[e._v("#")]),e._v(" Runtime options")]),e._v(" "),a("div",{pre:!0},[a("p",[e._v("The function 'Handlebars.compile' and 'Handlebars.precompile' create a function. This function can be called as\n"),a("code",[e._v("template(context, options)")]),e._v(" where "),a("code",[e._v("context")]),e._v(" is the input object.")]),e._v(" "),a("p",[a("code",[e._v("options")]),e._v(" is an object that can have any of the following properties")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("data")]),e._v(" Pass in an object to define custom "),a("code",[e._v("@variable")]),e._v(" private variables.")]),e._v(" "),a("li",[a("code",[e._v("helpers")]),e._v(" Pass in to provide custom helpers in addition to the globally defined helpers."),a("br"),e._v("\nValues defined in this object will replace any values defined in the global object for the duration of the template\nexecution.")]),e._v(" "),a("li",[a("code",[e._v("partials")]),e._v(" Pass in to provide custom partials in addition to the globally defined partials."),a("br"),e._v("\nValues defined in this object will replace any values defined in the global object for the duration of the template\nexecution.")]),e._v(" "),a("li",[a("code",[e._v("allowCallsToHelperMissing")]),e._v(" (since 4.3.0, insecure): If set to "),a("code",[e._v("true")]),e._v(", calls like "),a("code",[e._v("{{helperMissing}}")]),e._v(" and\n"),a("code",[e._v("{{blockHelperMissing}}")]),e._v(" will be allowed. Please note that this allows template authors to fabricate templates for\nRemote Code Execution on the environment running Handlebars (see https://github.com/wycats/handlebars.js/issues/1558)")])])]),a("h2",{attrs:{id:"options-to-control-prototype-access"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-to-control-prototype-access"}},[e._v("#")]),e._v(" Options to control prototype access:")]),e._v(" "),a("p",[e._v("From version 4.6.0 on, Handlebars forbids accessing prototype properties and methods of the context object by default.\nThe reason are various security issues that arise from this possibility. The following options can be used to control\nthis access.")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("Using these properties may open security holes.")]),e._v(" "),a("p",[e._v("Allowing prototype properties may allow template authors to execute arbitray code on you the machine where Handlebars is\nrunning. Even with some restrictions in place, an attacker may fabricate Handlebars templates that crash your machine.")]),e._v(" "),a("p",[e._v("Details can be found in the npm-security advisories "),a("a",{attrs:{href:"https://www.npmjs.com/advisories/755",target:"_blank",rel:"noopener noreferrer"}},[e._v("755"),a("OutboundLink")],1),e._v(",\n"),a("a",{attrs:{href:"https://www.npmjs.com/advisories/1164",target:"_blank",rel:"noopener noreferrer"}},[e._v("1164"),a("OutboundLink")],1),e._v(", "),a("a",{attrs:{href:"https://www.npmjs.com/advisories/1316",target:"_blank",rel:"noopener noreferrer"}},[e._v("1316"),a("OutboundLink")],1),e._v(",\n"),a("a",{attrs:{href:"https://www.npmjs.com/advisories/1324",target:"_blank",rel:"noopener noreferrer"}},[e._v("1324"),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://www.npmjs.com/advisories/1325",target:"_blank",rel:"noopener noreferrer"}},[e._v("1325"),a("OutboundLink")],1),e._v(" and in the blog-article\nof "),a("a",{attrs:{href:"http://mahmoudsec.blogspot.com/2019/04/handlebars-template-injection-and-rce.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mahmoud Gamal"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("allowProtoMethodsByDefault")]),e._v(" (since 4.7.0): a boolean (default: false) that defines whether methods that are define on\nthe prototype of an object should be resolvable or not, by default.")]),e._v(" "),a("p",[e._v("The methods "),a("code",[e._v("constructor")]),e._v(", "),a("code",[e._v("__defineGetter__")]),e._v(", "),a("code",[e._v("__defineSetter__")]),e._v(", "),a("code",[e._v("__lookupGetter__")]),e._v(" and "),a("code",[e._v("__lookupSetter__")]),e._v(" are\nforbidden, even if this option is set to "),a("code",[e._v("true")]),e._v(". They can be accessed only if the corresponding key in\n"),a("code",[e._v("allowedProtoMethods")]),e._v(" is set to "),a("code",[e._v("true")]),e._v(".")]),e._v(" "),a("p",[e._v("Setting this option to any value disables the warning that Handlebars writes to the console if a proto-method-access\nis attempted and forbidden.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("allowedProtoMethods")]),e._v(" (since 4.6.0): a string-to-boolean map of property-names that are allowed if they are methods of\nthe parent object. Undefined values revert the the value defined in "),a("code",[e._v("allowProtoMethodsByDefault")]),e._v(".")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("allowProtoPropertiesByDefault")]),e._v(" (since 4.7.0): a boolean (default: false) that defines whether non-method properties\nthat are defined on the prototype of an object should be resolvable or not, by default.")]),e._v(" "),a("p",[e._v("The property "),a("code",[e._v("__proto__")]),e._v(" is forbidden, even if this option is set to "),a("code",[e._v("true")]),e._v(". It can only be accessed if the\ncorresponding key in "),a("code",[e._v("allowedProtoProperties")]),e._v(" is set to "),a("code",[e._v("true")]),e._v(".")]),e._v(" "),a("p",[e._v("Setting this option to any value disables the warning that Handlebars writes to the console if a proto-property-access\nis attempted and forbidden.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("allowedProtoProperties")]),e._v(" (since 4.6.0): a string-to-boolean map of property-names that are allowed if they are\nproperties but not methods of the parent object. Undefined values revert to the value defined in\n"),a("code",[e._v("allowProtoPropertiesByDefault")])]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" template "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" handlebars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"{{aString.trim}}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("aString")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"  abc  "')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// result is empty, because trim is defined at String prototype")]),e._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" template "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" handlebars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"{{aString.trim}}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("aString")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"  abc  "')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("allowedProtoMethods")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("trim")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// result = 'abc'")]),e._v("\n")])])])])]),e._v(" "),a("p",[e._v("You can also use the package\n"),a("a",{attrs:{href:"https://www.npmjs.com/package/@handlebars/allow-prototype-access",target:"_blank",rel:"noopener noreferrer"}},[e._v("@handlebars/allow-prototype-access"),a("OutboundLink")],1),e._v(" revert to 4.5.3\nbehavior in cases where you cannot pass runtime-options, like in\n"),a("a",{attrs:{href:"https://www.npmjs.com/package/express-handlebars",target:"_blank",rel:"noopener noreferrer"}},[e._v("express-handlebars"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=o.exports}}]);